---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = T,
  comment = "#>",
  message = F,
  fig.path = "man/figures/README-",
  fig.width = 6, 
  fig.asp = 0.618, 
  out.width = "70%",
  fig.align = "center"
)
```


# jakpoststyle

<!-- badges: start -->
<!-- badges: end -->

The __jakpoststyle__ package makes it easy to customize [Datawrapper](https://www.datawrapper.de/) charts (created with a free plan account) using a custom theme of The Jakarta Post. It builds on the __DatawRappr__ package developed by [Benedict Witzenberger](https://github.com/munichrocker).

The functions:

* `jakpost_style` adds a chart description, byline and The Jakarta Post's logo;  
* `jp_scale_y` modifies the y-axis elements, including truncating the scale; and  
* `jp_covid_annotation` creates COVID-19 text and line annotations.


## Installation

``` r
devtools::install_github("dzulfiqarfr/jakpoststyle")
```


## Getting started

__jakpoststyle__ works on an existing Datawrapper chart. It requires the __DatawRappr__ package, which allows you to use the Datawrapper's API through R.

```{r example, eval = F}
# Load the packages
library(DatawRappr)
library(jakpoststyle)

# Apply the custom theme
jakpost_style(
  chart_id,
  subtitle = "Indonesian manufacturing sector's output (percent change from a year earlier)",
  author = "Dzulfiqar Fathur Rahman",
  source = "Statistics Indonesia (BPS)",
  source_url = "bps.go.id"
)

# Modify the y-axis
jp_scale_y(
  chart_id,
  y = manufacturing_cleaned$growth,
  scale_y_max = 6,
  scale_y_min_rule = "truncated",
  scale_y_increment = 3
)

# Add COVID-19 pandemic line and text annotations
jp_covid_annotation(
  chart_id,
  covid_text_y = 6,
  text_color = "#ee493a",
  line_color = "#ee493a",
  line_type = "dashed"
)
```

<p align="center">
```{r demo, echo = F, fig.align = "center"}
knitr::include_graphics("figures/idn_manufacturing_plot.png")
```
</p>


## Note

The package is optimized for line and column charts. Optimization for other chart types will, hopefully, follow in the future.


## Disclaimer

This is not an official template from The Jakarta Post.


## More resources

The package mainly uses the `dw_edit_chart()` function from the __DatawRappr__ package, which you learn more [here](https://munichrocker.github.io/DatawRappr/reference/dw_edit_chart.html). You can read the Datawrapper API documentation [here](https://developer.datawrapper.de/reference).
